<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard - Live Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="p-4">
  <h1 class="mb-4">Admin Dashboard: Live Vehicle Tracker</h1>

  <div class="mb-3">
    <h5>Create New Trip</h5>
    <input type="text" id="tripId" placeholder="Trip ID" class="form-control mb-2">
    <input type="text" id="vehicle" placeholder="Vehicle Number" class="form-control mb-2">
    <input type="text" id="driver" placeholder="Driver Name" class="form-control mb-2">
    <button class="btn btn-success" onclick="createTrip()">Create Trip</button>
  </div>

  <div class="mb-3">
    <h5>Stop Trip</h5>
    <input type="text" id="stopTripId" placeholder="Trip ID to stop" class="form-control mb-2">
    <button class="btn btn-danger" onclick="stopTrip()">Stop Trip</button>
  </div>

  <div class="mb-3">
    <h5>View All Trips</h5>
    <button class="btn btn-primary" onclick="getTrips()">Get All Trips</button>
    <pre id="tripList" class="mt-2 bg-light p-3"></pre>
  </div>

  <div class="mb-3">
    <h5>Track Trip Location</h5>
    <input type="text" id="trackTripId" placeholder="Trip ID" class="form-control mb-2">
    <button class="btn btn-info" onclick="trackTrip()">Track Trip</button>
    <pre id="trackData" class="mt-2 bg-light p-3"></pre>
  </div>

  <script>
    const API_BASE = "/api";

    function createTrip() {
      const data = {
        tripId: document.getElementById('tripId').value,
        vehicle: document.getElementById('vehicle').value,
        driver: document.getElementById('driver').value
      };
      axios.post(`${API_BASE}/create_trip`, data)
        .then(res => alert('Trip created'))
        .catch(err => alert('Error creating trip'));
    }

    function stopTrip() {
      const tripId = document.getElementById('stopTripId').value;
      axios.post(`${API_BASE}/stop_trip/${tripId}`)
        .then(res => alert('Trip stopped'))
        .catch(err => alert('Error stopping trip'));
    }

    function getTrips() {
      axios.get(`${API_BASE}/trips`)
        .then(res => {
          document.getElementById('tripList').textContent = JSON.stringify(res.data, null, 2);
        })
        .catch(err => alert('Error getting trips'));
    }

    function trackTrip() {
      const tripId = document.getElementById('trackTripId').value;
      axios.get(`${API_BASE}/trip/${tripId}`)
        .then(res => {
          document.getElementById('trackData').textContent = JSON.stringify(res.data, null, 2);
        })
        .catch(err => alert('Error tracking trip'));
    }
  </script>
</body>
</html>
